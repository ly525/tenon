(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a5b8c16","chunk-36057de2","chunk-715c87c2","chunk-190e6818","chunk-5badc949","chunk-2d0a45d2","chunk-2d217a11","chunk-1332bbe2","chunk-2d0c26a6"],{"05b9":function(t,e,n){"use strict";n.r(e),e["default"]={data:function(){return{highlightBox:{target:null,tagName:"",style:{}}}},methods:{mousemove:function(t){if(this.$el.contains(t.target)){var e=t.target.closest(".layout-container");e?this.highlightBox.target!==e&&(this.highlightBox.target=e,this.highlightBox.tagName=e.dataset.componentName,this.repaintHighlightBox()):this.highlightBox={target:null,tagName:"",style:{display:"none"}}}else this.highlightBox={target:null,tagName:"",style:{display:"none"}}},repaintHighlightBox:function(){var t=this;this.highlightBox.target&&this.$nextTick((function(){var e=t.getContainerRect(),n=t.highlightBox.target.getBoundingClientRect(),o=t.$el,i=o.scrollTop,a=o.scrollLeft,c=Math.floor(n.top-e.top+i),r=Math.floor(n.left-e.left+a);t.highlightBox.style={display:"block",width:"".concat(Math.floor(n.width),"px"),height:"".concat(Math.floor(n.height),"px"),top:"".concat(c,"px"),left:"".concat(r,"px")}}))}},created:function(){this.$EventStack.register("highlight-box","mousemove",this.mousemove)},destroy:function(){this.$EventStack.dispose("highlight-box","mousemove")}}},"0a49":function(t,e,n){var o=n("9b43"),i=n("626a"),a=n("4bf8"),c=n("9def"),r=n("cd1c");t.exports=function(t,e){var n=1==t,s=2==t,d=3==t,h=4==t,p=6==t,l=5==t||p,u=e||r;return function(e,r,m){for(var f,g,v=a(e),x=i(v),y=o(r,m,3),b=c(x.length),k=0,C=n?u(e,b):s?u(e,0):void 0;b>k;k++)if((l||k in x)&&(f=x[k],g=y(f,k,v),t))if(n)C[k]=g;else if(g)switch(t){case 3:return!0;case 5:return f;case 6:return k;case 2:C.push(f)}else if(h)return!1;return p?-1:d||h?h:C}}},1169:function(t,e,n){var o=n("2d95");t.exports=Array.isArray||function(t){return"Array"==o(t)}},"20d6":function(t,e,n){"use strict";var o=n("5ca1"),i=n("0a49")(6),a="findIndex",c=!0;a in[]&&Array(1)[a]((function(){c=!1})),o(o.P+o.F*c,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(a)},2607:function(t,e,n){"use strict";n.r(e);n("456d"),n("ac6a");e["default"]={props:{properties:Object},computed:{style:function(){return this.properties.css}},watch:{style:{handler:function(){this.repaint()},deep:!0}},methods:{repaint:function(){var t=this;Object.keys(this.style).forEach((function(e){t.$el.style[e]=t.style[e]}))}},mounted:function(){var t=this;this.$nextTick((function(){t.repaint()}))}}},"2f65":function(t,e,n){},"329c":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.asyncLoadComponent(t.component.name),{tag:"component",attrs:{"data-component-id":t.component.id,"data-component-name":t.component.name,"data-component-layout":t.component.layout,properties:t.component.properties},on:{"update:properties":function(e){return t.$set(t.component,"properties",e)}}},[t._l(t.component.children,(function(e){return["NestedLayoutContainer"===e.name?n("RenderNestedLayoutCompiler",{key:e.id,attrs:{component:e}}):"PositionLayoutContainer"===e.name?n("RenderPositionLayoutCompiler",{key:e.id,staticClass:"layout-container",attrs:{component:e}}):"TabPanel"===e.name?n("RenderTabPanelLayoutCompiler",{key:e.id,staticClass:"layout-container",attrs:{component:e}}):n(t.asyncLoadComponent(e.name),t._b({key:e.id,tag:"component",staticClass:"layout-container",attrs:{"data-component-id":e.id,"data-component-name":e.name,"data-component-layout":e.layout,properties:e.properties},on:{"update:properties":function(n){return t.$set(e,"properties",n)}}},"component",e.properties,!1,!0))]}))],2)},i=[],a=n("b404"),c={name:"RenderPositionLayoutCompiler",props:{component:Object},inject:["asyncLoadComponent"],components:{RenderNestedLayoutCompiler:function(){return n.e("chunk-2d0c26a6").then(n.bind(null,"49e0"))},RenderTabPanelLayoutCompiler:a["default"]}},r=c,s=n("2877"),d=Object(s["a"])(r,o,i,!1,null,null,null);e["default"]=d.exports},"49e0":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.asyncLoadComponent(t.component.name),{tag:"component",staticClass:"layout-container",attrs:{"data-component-id":t.component.id,"data-component-name":t.component.name,"data-component-layout":t.component.layout,properties:t.component.properties},on:{"update:properties":function(e){return t.$set(t.component,"properties",e)}}},[t._l(t.component.children,(function(e){return["NestedLayoutContainer"===e.name?n("RenderNestedLayoutCompiler",{key:e.id,attrs:{component:e}}):"PositionLayoutContainer"===e.name?n("RenderPositionLayoutCompiler",{key:e.id,staticClass:"layout-container",attrs:{component:e}}):"TabPanel"===e.name?n("RenderTabPanelLayoutCompiler",{key:e.id,staticClass:"layout-container",attrs:{component:e}}):n(t.asyncLoadComponent(e.name),t._b({key:e.id,tag:"component",staticClass:"layout-container",attrs:{"data-component-id":e.id,"data-component-name":e.name,"data-component-layout":e.layout,properties:e.properties},on:{"update:properties":function(n){return t.$set(e,"properties",n)}}},"component",e.properties,!1,!0))]}))],2)},i=[],a=n("329c"),c=n("b404"),r={name:"RenderNestedLayoutCompiler",props:{component:Object},inject:["asyncLoadComponent"],components:{RenderPositionLayoutCompiler:a["default"],RenderTabPanelLayoutCompiler:c["default"]}},s=r,d=n("2877"),h=Object(d["a"])(s,o,i,!1,null,null,null);e["default"]=h.exports},"4a8d":function(t,e,n){"use strict";n.r(e);n("7f7f"),n("7514");e["default"]={data:function(){return{isStage:!1,dragoverBox:{target:null,componentId:"",rect:{},hint:"",placement:"inside",style:{}}}},methods:{repaintDragoverBox:function(){var t=this;this.dragoverBox.target&&this.$nextTick((function(){var e=t.getContainerRect(),n=t.dragoverBox.target.getBoundingClientRect(),o=t.$el,i=o.scrollTop,a=o.scrollLeft,c=Math.floor(n.top-e.top+i),r=Math.floor(n.left-e.left+a);t.dragoverBox.style={display:"block",width:"".concat(Math.floor(n.width),"px"),height:"".concat(Math.floor(n.height),"px"),top:"".concat(c,"px"),left:"".concat(r,"px")}}))},ondragover:function(t){if(t.preventDefault(),this.$el.contains(t.target)){var e=t.target.closest(".layout-container");if(e){if(this.dragoverBox.target!==e&&(this.dragoverBox.target=e,this.isStage=e.classList.contains("editor-container-screen"),this.dragoverBox.componentId=this.dragoverBox.target.dataset.componentId,this.dragoverBox.rect=this.dragoverBox.target.getBoundingClientRect()),this.dragoverBox.target){var n=this.dragoverBox.target.dataset.componentName,o={x:0,y:15};"NestedLayoutContainer"!==n&&"PositionLayoutContainer"!==n&&(o.y=this.dragoverBox.rect.height/2);var i={x:t.clientX,y:t.clientY},a={x:this.dragoverBox.rect.x+o.x,y:this.dragoverBox.rect.y,w:this.dragoverBox.rect.width-2*o.x,h:o.y},c={x:this.dragoverBox.rect.x+o.x,y:this.dragoverBox.rect.y+this.dragoverBox.rect.height-o.y,w:this.dragoverBox.rect.width-2*o.x,h:o.y},r={x:this.dragoverBox.rect.x+o.x,y:this.dragoverBox.rect.y+o.y,w:this.dragoverBox.rect.width-2*o.x,h:this.dragoverBox.rect.height-2*o.y};this.pointInRect(i,a)&&(this.dragoverBox.placement="up"),this.pointInRect(i,c)&&(this.dragoverBox.placement="down"),this.pointInRect(i,r)&&(this.dragoverBox.placement="inside"),this.isStage&&(this.dragoverBox.placement="inside"),this.dragoverBox.hint="insert ".concat(n," ").concat(this.dragoverBox.placement)}this.repaintDragoverBox()}}else this.dragoverBox={target:null,componentId:"",rect:{},hint:"",placement:"inside",style:{}}},pointInRect:function(t,e){return t.x>=e.x&&t.y>=e.y&&t.x<=e.x+e.w&&t.y<=e.y+e.h},ondrop:function(t){if(t.preventDefault(),this.dragoverBox.componentId){var e=this.dragoverBox.componentId;this.findParentComponentById(e);var n=null,o=null;o=this.project.components.id===e?this.project.components:this.component.children.find((function(t){return t.id===e}));try{var i=t.dataTransfer.getData("Text"),a=JSON.parse(i);if(n=a,n.layout="nestedLayout",this.asyncLoadComponent(n.name),"PositionLayoutContainer"===o.name&&"inside"===this.dragoverBox.placement){var c=t.target.getBoundingClientRect(),r={position:"absolute",top:"".concat(t.clientY-c.top,"px"),left:"".concat(t.clientX-c.left,"px")};n.layout="positionLayout",n.properties.css=Object.assign({},n.properties.css,r),console.log("ondrop event: ",t,c,n,o,this)}this.dropEvent(n,o)}catch(s){console.log("drop error:",s)}}this.dragoverBox={target:null,componentId:"",rect:{},hint:"",placement:"inside",style:{}}},dropEvent:function(t,e){var n=this;console.log("nested drop:",t,e,this);var o="",i="";if("up"===this.dragoverBox.placement)i="componentInsertAbove",o="insert ".concat(t.properties.name," above ").concat(e.properties.name);else if("down"===this.dragoverBox.placement)i="componentInsertBelow",o="insert ".concat(t.properties.name," below ").concat(e.properties.name);else switch(e.name){case"NestedLayoutContainer":i="componentInsertInto",o="insert ".concat(t.properties.name," into ").concat(e.properties.name);break;case"PositionLayoutContainer":i="componentInsertInto",o="insert ".concat(t.properties.name," into ").concat(e.properties.name);break;default:console.log("Sorry, we are out of ".concat(e.name,"."))}this.emitEvent(i,t,e.id),this.emitEvent("snapshotProject"),this.$Message({showClose:!0,message:o,type:"success"}),setTimeout((function(){n.currentComponentId=t.id,n.componentSelectedStack=[t.id]}),200)}},created:function(){this.$EventStack.register("editor-container","dragover",this.ondragover),this.$EventStack.register("editor-container","drop",this.ondrop)},destroyed:function(){this.$EventStack.dispose("editor-container","dragover"),this.$EventStack.dispose("editor-container","drop")}}},"5ac9":function(t,e,n){"use strict";n.r(e);n("7514"),n("20d6");e["default"]={data:function(){return{selectBox:{target:null,layout:"nestedLayout",style:{}}}},computed:{selectBoxVisiable:function(){var t=this,e={showRecombination:!1,showSelectParent:!1,showUp:!1,showDown:!1,showDelete:!1};if(this.component.children){var n=this.component.children.findIndex((function(e){return e.id===t.currentComponentId}));n>-1&&(e.showSelectParent=!0,e.showUp=n>0,e.showDown=this.component.children.length>0&&n!==this.component.children.length-1,e.showDelete=this.project.components.id!==this.currentComponentId)}return e}},methods:{repaintSelectBox:function(){var t=this;this.currentComponentId?this.$nextTick((function(){var e=document.querySelector('[data-component-id="'.concat(t.currentComponentId,'"]')),n=t.getContainerRect(),o=e.getBoundingClientRect();t.selectBox.layout=e.dataset.componentLayout;var i=t.$el,a=i.scrollTop,c=i.scrollLeft,r=Math.floor(o.top-n.top+a),s=Math.floor(o.left-n.left+c);t.selectBox.style={display:"block",width:"".concat(Math.floor(o.width),"px"),height:"".concat(Math.floor(o.height),"px"),top:"".concat(r,"px"),left:"".concat(s,"px")},t.registerResizeEvent(t.currentComponentId,{el:e,callback:t.resize})})):this.selectBox={target:null,tagName:"",style:{display:"none"}}},recombinationComponentEvent:function(){var t=this;this.$Prompt("name：","Recombination component",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"请输入 name"}).then((function(e){var n=e.value,o=localStorage.getItem("Tenon-recombination-components"),i=o?JSON.parse(o):[],a=t.component.children.find((function(e){return e.id===t.currentComponentId})),c=JSON.parse(JSON.stringify(a));c.properties.name=n,i.push({id:t.$uuid(),name:n,data:c}),localStorage.setItem("Tenon-recombination-components",JSON.stringify(i)),console.log("RecombinationComponent: ",i),t.$message({type:"success",message:"Recombination component: ".concat(n)})})).catch((function(){}))},selectParentComponentEvent:function(){var t=this,e=function e(n,o){if(n.id!==o&&n.children)for(var i=0;i<n.children.length;i++){var a=n.children[i];if(e(a,o),a.id===o){t.currentComponentId=n.id;break}}};e(this.project.components,this.currentComponentId)},upEvent:function(){this.emitEvent("componentUp",this.currentComponentId),this.repaintSelectBox(),this.emitEvent("snapshotProject")},downEvent:function(){this.emitEvent("componentDown",this.currentComponentId),this.repaintSelectBox(),this.$EventBus.$emit("snapshotProject")},deleteEvent:function(){this.currentComponentId="",this.emitEvent("componentRemove",this.currentComponentId),this.$EventBus.$emit("snapshotProject")}}}},7514:function(t,e,n){"use strict";var o=n("5ca1"),i=n("0a49")(5),a="find",c=!0;a in[]&&Array(1)[a]((function(){c=!1})),o(o.P+o.F*c,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(a)},a089:function(t,e,n){var o={"./Button":["caf7",9,"chunk-1b4f70a2"],"./Button/":["caf7",9,"chunk-1b4f70a2"],"./Button/data":["c59a",3,"chunk-2d216ff0"],"./Button/data.json":["c59a",3,"chunk-2d216ff0"],"./Button/index":["caf7",9,"chunk-1b4f70a2"],"./Button/index.vue":["caf7",9,"chunk-1b4f70a2"],"./Button/schema":["712f",9,"chunk-2d0d5fc4"],"./Button/schema.js":["712f",9,"chunk-2d0d5fc4"],"./Header":["dfcb",9,"chunk-eca0df2a"],"./Header/":["dfcb",9,"chunk-eca0df2a"],"./Header/data":["b7fe",3,"chunk-2d21088a"],"./Header/data.json":["b7fe",3,"chunk-2d21088a"],"./Header/index":["dfcb",9,"chunk-eca0df2a"],"./Header/index.vue":["dfcb",9,"chunk-eca0df2a"],"./Header/schema":["85db",9,"chunk-2d0de931"],"./Header/schema.js":["85db",9,"chunk-2d0de931"],"./Marquee":["0524",9,"chunk-1a95c670"],"./Marquee/":["0524",9,"chunk-1a95c670"],"./Marquee/data":["3b78",3,"chunk-2d0c46a6"],"./Marquee/data.json":["3b78",3,"chunk-2d0c46a6"],"./Marquee/index":["0524",9,"chunk-1a95c670"],"./Marquee/index.vue":["0524",9,"chunk-1a95c670"],"./Marquee/schema":["d060",9,"chunk-2d21d0fc"],"./Marquee/schema.js":["d060",9,"chunk-2d21d0fc"],"./NestedLayoutContainer":["3f62",9,"chunk-5fd58fa6"],"./NestedLayoutContainer/":["3f62",9,"chunk-5fd58fa6"],"./NestedLayoutContainer/data":["c315",3,"chunk-2d21674a"],"./NestedLayoutContainer/data.json":["c315",3,"chunk-2d21674a"],"./NestedLayoutContainer/index":["3f62",9,"chunk-5fd58fa6"],"./NestedLayoutContainer/index.vue":["3f62",9,"chunk-5fd58fa6"],"./NestedLayoutContainer/schema":["5a94",9,"chunk-2d0d2bdd"],"./NestedLayoutContainer/schema.js":["5a94",9,"chunk-2d0d2bdd"],"./PositionLayoutContainer":["3581",9,"chunk-3a4155f3"],"./PositionLayoutContainer/":["3581",9,"chunk-3a4155f3"],"./PositionLayoutContainer/data":["31df",3,"chunk-2d0b9456"],"./PositionLayoutContainer/data.json":["31df",3,"chunk-2d0b9456"],"./PositionLayoutContainer/index":["3581",9,"chunk-3a4155f3"],"./PositionLayoutContainer/index.vue":["3581",9,"chunk-3a4155f3"],"./PositionLayoutContainer/schema":["6fac",9,"chunk-2d0db808"],"./PositionLayoutContainer/schema.js":["6fac",9,"chunk-2d0db808"],"./TabPanel":["6d9c",9,"chunk-7955e450"],"./TabPanel/":["6d9c",9,"chunk-7955e450"],"./TabPanel/data":["a0f0",3,"chunk-2d2079af"],"./TabPanel/data.json":["a0f0",3,"chunk-2d2079af"],"./TabPanel/index":["6d9c",9,"chunk-7955e450"],"./TabPanel/index.vue":["6d9c",9,"chunk-7955e450"],"./TabPanel/schema":["9ad4",9,"chunk-2d0f028e"],"./TabPanel/schema.js":["9ad4",9,"chunk-2d0f028e"],"./Tabs":["bb93",9,"chunk-1545bfbc"],"./Tabs/":["bb93",9,"chunk-1545bfbc"],"./Tabs/data":["01e1",3,"chunk-2d0a3723"],"./Tabs/data.json":["01e1",3,"chunk-2d0a3723"],"./Tabs/index":["bb93",9,"chunk-1545bfbc"],"./Tabs/index.vue":["bb93",9,"chunk-1545bfbc"],"./Tabs/schema":["1d5f",9,"chunk-2d0b655a"],"./Tabs/schema.js":["1d5f",9,"chunk-2d0b655a"],"./Text":["2970",9,"chunk-189e5e06"],"./Text/":["2970",9,"chunk-189e5e06"],"./Text/data":["cfc0",3,"chunk-2d222cc6"],"./Text/data.json":["cfc0",3,"chunk-2d222cc6"],"./Text/index":["2970",9,"chunk-189e5e06"],"./Text/index.vue":["2970",9,"chunk-189e5e06"],"./Text/schema":["8f32",9,"chunk-2d0e9b03"],"./Text/schema.js":["8f32",9,"chunk-2d0e9b03"],"./config":["9bb4",9,"chunk-2d0f0611"],"./config/":["9bb4",9,"chunk-2d0f0611"],"./config/common-data":["4104",3,"chunk-2d0c0237"],"./config/common-data.json":["4104",3,"chunk-2d0c0237"],"./config/common-schema":["e0d4",9,"chunk-2d224af1"],"./config/common-schema.js":["e0d4",9,"chunk-2d224af1"],"./config/index":["9bb4",9,"chunk-2d0f0611"],"./config/index.js":["9bb4",9,"chunk-2d0f0611"]};function i(t){var e=o[t];return e?n.e(e[2]).then((function(){var t=e[0];return n.t(t,e[1])})):Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}i.keys=function(){return Object.keys(o)},i.id="a089",t.exports=i},aec6:function(t,e,n){"use strict";n.r(e);n("7f7f");var o=n("2607");e["default"]={data:function(){return{asyncComponents:{}}},methods:{asyncLoadComponent:function(t){return this.asyncComponents[t]||(this.asyncComponents[t]=function(){return n("a089")("./".concat(t)).then((function(t){var e=Object.create(t);return e.default.mixins=(e.default.mixins||[]).concat(o["default"]),e}))}),this.asyncComponents[t]}}}},b404:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.asyncLoadComponent(t.component.name),{tag:"component",attrs:{"data-component-id":t.component.id,"data-component-name":t.component.name,"data-component-layout":t.component.layout,properties:t.component.properties},on:{"update:properties":function(e){return t.$set(t.component,"properties",e)}}},[t.tabPanelComponent?n("RenderNestedLayoutCompiler",{attrs:{component:t.tabPanelComponent}}):t._e()],1)},i=[],a=(n("7514"),{name:"RenderTabPanelLayoutCompiler",props:{component:Object},inject:["asyncLoadComponent","project"],components:{RenderNestedLayoutCompiler:function(){return n.e("chunk-1332bbe2").then(n.bind(null,"49e0"))}},computed:{tabPanelComponent:function(){var t=this,e=null,n=this.component.properties.tabsId;if(n){var o=function n(o,i){if(o.id!==i){if(o.children)for(var a=0;a<o.children.length;a++){var c=o.children[a];n(c,i)}}else e=t.component.children.find((function(t){return t.id===o.properties.selected}))};o(this.project.components,n)}return e}}}),c=a,r=n("2877"),s=Object(r["a"])(c,o,i,!1,null,null,null);e["default"]=s.exports},b62c:function(t,e,n){"use strict";n("2f65")},c817:function(t,e,n){"use strict";n.r(e),e["default"]={data:function(){return{timer:"",delay:200}},methods:{registerResizeEvent:function(t,e){this.$ResizeEvent.register(t,e)},disposeResizeEvent:function(t){this.$ResizeEvent.dispose(t)},resize:function(t){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e.repaintHighlightBox(),e.repaintSelectBox(),console.log("resize: ",t)}),this.delay)}},created:function(){window.addEventListener("resize",this.resize,!1)},mounted:function(){var t=this;this.$nextTick((function(){var e={el:t.$el,callback:t.resize};t.registerResizeEvent("EditorContainer",e)}))},destroyed:function(){this.$ResizeEvent.destroy(),window.removeEventListener("resize",this.resize,!1)}}},cd1c:function(t,e,n){var o=n("e853");t.exports=function(t,e){return new(o(t))(e)}},cd85:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-container",attrs:{tabindex:"1"},on:{click:t.clickEvent}},[n("div",{staticClass:"editor-container-layer"},[n("div",{staticClass:"highlight-box",style:t.highlightBox.style},[n("div",{staticClass:"highlight-name"},[t._v(t._s(t.highlightBox.tagName))])]),n("div",{staticClass:"dragover-box",style:t.dragoverBox.style},[n("div",{staticClass:"dragover-hint"},[t._v(t._s(t.dragoverBox.hint))])]),"nestedLayout"===t.selectBox.layout?n("div",{staticClass:"select-box",style:t.selectBox.style},[n("div",{staticClass:"select-actions f f-ai-c"},[n("i",{staticClass:"icon-generate-component",attrs:{title:"Generate component"},on:{click:t.recombinationComponentEvent}}),t.selectBoxVisiable.showSelectParent?n("i",{staticClass:"icon-left-up",attrs:{title:"Select parent"},on:{click:t.selectParentComponentEvent}}):t._e(),t.selectBoxVisiable.showUp?n("i",{staticClass:"el-icon-caret-top",attrs:{title:"Up"},on:{click:t.upEvent}}):t._e(),t.selectBoxVisiable.showDown?n("i",{staticClass:"el-icon-caret-bottom",attrs:{title:"Down"},on:{click:t.downEvent}}):t._e(),t.selectBoxVisiable.showDelete?n("i",{staticClass:"el-icon-delete",attrs:{title:"Remove"},on:{click:t.deleteEvent}}):t._e()])]):t._e(),"positionLayout"===t.selectBox.layout?n("div",{staticClass:"position-select-box",style:t.selectBox.style},[n("div",{ref:"positionSelectHandle",staticClass:"position-select-handle"},[n("i",{staticClass:"handle-top-left",attrs:{"data-direction":"top-left"}}),n("i",{staticClass:"handle-top",attrs:{"data-direction":"top"}}),n("i",{staticClass:"handle-top-right",attrs:{"data-direction":"top-right"}}),n("i",{staticClass:"handle-bottom-left",attrs:{"data-direction":"bottom-left"}}),n("i",{staticClass:"handle-bottom",attrs:{"data-direction":"bottom"}}),n("i",{staticClass:"handle-bottom-right",attrs:{"data-direction":"bottom-right"}}),n("i",{staticClass:"handle-left",attrs:{"data-direction":"left"}}),n("i",{staticClass:"handle-right",attrs:{"data-direction":"right"}})]),n("div",{staticClass:"position-select-actions f f-ai-c"},[n("i",{staticClass:"icon-generate-component",attrs:{title:"Generate component"},on:{click:t.recombinationComponentEvent}}),t.selectBoxVisiable.showSelectParent?n("i",{staticClass:"icon-left-up",attrs:{title:"Select parent"},on:{click:t.selectParentComponentEvent}}):t._e(),t.selectBoxVisiable.showDelete?n("i",{staticClass:"el-icon-delete",attrs:{title:"Remove"},on:{click:t.deleteEvent}}):t._e()])]):t._e()]),n("div",{ref:"stage",staticClass:"editor-container-stage",style:{width:t.project.resolution.width+"px",height:t.project.resolution.height+"px"},on:{scroll:t.resize}},[n("RenderNestedLayoutCompiler",{ref:"screen",staticClass:"editor-container-screen",attrs:{component:t.project.components}})],1)])},i=[],a=n("49e0"),c=n("aec6"),r=n("4a8d"),s=n("c817"),d=n("05b9"),h=n("5ac9"),p=n("de98"),l={name:"EditContainer",mixins:[c["default"],r["default"],s["default"],d["default"],h["default"],p["default"]],props:{componentId:String,project:Object},inject:["emitEvent"],components:{RenderNestedLayoutCompiler:a["default"]},provide:function(){return{asyncLoadComponent:this.asyncLoadComponent,project:this.project}},data:function(){return{component:{}}},computed:{currentComponentId:{get:function(){return this.componentId},set:function(t){this.$emit("update:componentId",t)}}},watch:{componentId:function(t,e){this.disposeResizeEvent(e),this.findParentComponentById(t),this.repaintHighlightBox(),this.repaintSelectBox()}},methods:{findParentComponentById:function(t){if(this.component={},!t)return{};var e=null;if(this.project.components.id===t)e=this.project.components;else{var n=function t(n,o){if(n.id!==o&&n.children)for(var i=0;i<n.children.length;i++){var a=n.children[i];if(t(a,o),a.id===o){e=n;break}}};n(this.project.components,t)}return this.component=e,e},clickEvent:function(t){var e=t.target.closest(".layout-container");if(e){var n=e.dataset.componentId;this.currentComponentId=n,this.componentSelectedStack=[n]}},getContainerRect:function(){var t=this.$el.getBoundingClientRect();return t}}},u=l,m=(n("b62c"),n("2877")),f=Object(m["a"])(u,o,i,!1,null,null,null);e["default"]=f.exports},de98:function(t,e,n){"use strict";n.r(e);n("456d"),n("ac6a"),n("7514");e["default"]={data:function(){return{componentSelectedStack:[],isMove:!1,direction:"",mouseProperties:{},originComponentPropertiesStack:{},containerProperties:{},componentStack:{}}},methods:{findComponentById:function(t){var e=null,n=this.findParentComponentById(t);return n.children&&(e=n.children.find((function(e){return e.id===t}))),e},mousedownEvent:function(t){var e=this;this.$refs.positionSelectHandle&&this.$refs.positionSelectHandle.contains(t.target)&&(this.direction=t.target.dataset.direction||"move",this.mouseProperties={clientX:t.clientX,clientY:t.clientY},this.componentSelectedStack.forEach((function(n){var o=e.findParentComponentById(n),i=document.querySelector('[data-component-id="'.concat(o.id,'"]')),a=i.getBoundingClientRect(),c=document.querySelector('[data-component-id="'.concat(n,'"]')),r=e.findComponentById(n),s=JSON.parse(JSON.stringify(r.properties));s.css.width=c.offsetWidth,s.css.height=c.offsetHeight,s.mouseOffsetX=t.clientX-a.x-parseInt(s.css.left),s.mouseOffsetY=t.clientY-a.y-parseInt(s.css.top),e.$set(e.containerProperties,n,a),e.$set(e.originComponentPropertiesStack,n,s)})),this.isMove=!0)},mouseupEvent:function(){this.isMove&&this.$EventBus.$emit("snapshotProject"),this.isMove=!1,this.direction="",this.mouseProperties={},this.originComponentPropertiesStack={},this.containerProperties={},this.componentStack={}},mousemoveEvent:function(t){var e=this;this.isMove&&this.componentSelectedStack.forEach((function(n){var o=null;e.componentStack[n]?o=e.componentStack[n]:(o=e.findComponentById(n),e.$set(e.componentStack,n,o));var i=o.properties.css,a=e.containerProperties[n],c=e.originComponentPropertiesStack[n],r=c.mouseOffsetX,s=c.mouseOffsetY,d=c.css,h=t.clientX,p=t.clientY,l=d,u={};"move"===e.direction&&(h-r<a.x&&(h=a.x+r),h-r+parseInt(l.width)>a.x+a.width&&(h=a.x+a.width-(parseInt(l.width)-r)),p-s<a.y&&(p=a.y+s),p-s+parseInt(l.height)>a.y+a.height&&(p=a.y+a.height-(parseInt(l.height)-s))),e.direction.indexOf("bottom")>-1&&p-s+parseInt(l.height)>a.y+a.height&&(p=a.y+a.height-(parseInt(l.height)-s)),e.direction.indexOf("left")>-1&&h-r<a.x&&(h=a.x+r),e.direction.indexOf("right")>-1&&h-r+parseInt(l.width)>a.x+a.width&&(h=a.x+a.width-(parseInt(l.width)-r)),e.direction.indexOf("top")>-1&&p-s<a.y&&(p=a.y+s);var m={x:h-e.mouseProperties.clientX,y:p-e.mouseProperties.clientY},f=parseInt(d.top)+m.y,g=parseInt(d.left)+m.x,v=parseInt(d.width||0),x=parseInt(d.height||0),y={width:v+m.x,height:x+m.y},b={width:v-m.x,height:x-m.y},k={minWidth:i.minWidth||30,minHeight:i.minHeight||30,maxWidth:i.maxWidth||a.width,maxHeight:i.maxHeight||a.height};switch(y.width<k.minWidth&&(y.width=k.minWidth),y.height<k.minHeight&&(y.height=k.minHeight),b.width<k.minWidth&&(b.width=k.minWidth),b.height<k.minHeight&&(b.height=k.minHeight),y.width>k.maxWidth&&(y.width=k.maxWidth),y.height>k.maxHeight&&(y.height=k.maxHeight),b.width>k.maxWidth&&(b.width=k.maxWidth),b.height>k.maxHeight&&(b.height=k.maxHeight),"move"!==e.direction&&(parseInt(d.left)+parseInt(d.width)-k.minWidth<g&&(g=parseInt(d.left)+parseInt(d.width)-k.minWidth),parseInt(d.top)+parseInt(d.height)-k.minHeight<f&&(f=parseInt(d.top)+parseInt(d.height)-k.minHeight),parseInt(d.left)+parseInt(d.width)-k.maxWidth>g&&(g=parseInt(d.left)+parseInt(d.width)-k.maxWidth),parseInt(d.top)+parseInt(d.height)-k.maxHeight>f&&(f=parseInt(d.top)+parseInt(d.height)-k.maxHeight)),console.log(a,d,f,g,m,r,s),e.direction){case"move":u.top="".concat(f,"px"),u.left="".concat(g,"px");break;case"top-left":u.width="".concat(b.width,"px"),u.height="".concat(b.height,"px"),u.top="".concat(f,"px"),u.left="".concat(g,"px");break;case"top":u.height="".concat(b.height,"px"),u.top="".concat(f,"px");break;case"top-right":u.width="".concat(y.width,"px"),u.height="".concat(b.height,"px"),u.top="".concat(f,"px");break;case"bottom-left":u.width="".concat(b.width,"px"),u.height="".concat(y.height,"px"),u.left="".concat(g,"px");break;case"bottom":u.height="".concat(y.height,"px");break;case"bottom-right":u.width="".concat(y.width,"px"),u.height="".concat(y.height,"px");break;case"left":u.width="".concat(b.width,"px"),u.left="".concat(g,"px");break;case"right":u.width="".concat(y.width,"px");break;default:console.log("mousemove direction is undefined: ",e.direction)}Object.keys(u).forEach((function(t){o.properties.css[t]?o.properties.css[t]=u[t]:e.$set(o.properties.css,t,u[t])})),e.repaintSelectBox()}))}},mounted:function(){this.$EventStack.register("position-select-handle","mousedown",this.mousedownEvent),this.$EventStack.register("position-select-handle","mousemove",this.mousemoveEvent),this.$EventStack.register("position-select-handle","mouseup",this.mouseupEvent),console.log("EventStack:",this.$EventStack)},destroyed:function(){this.$EventStack.dispose("position-select-handle","mousedown"),this.$EventStack.dispose("position-select-handle","mousemove"),this.$EventStack.dispose("position-select-handle","mouseup")}}},e853:function(t,e,n){var o=n("d3f4"),i=n("1169"),a=n("2b4c")("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),o(e)&&(e=e[a],null===e&&(e=void 0))),void 0===e?Array:e}}}]);