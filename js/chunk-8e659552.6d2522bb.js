(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8e659552"],{"0a49":function(t,e,o){var n=o("9b43"),r=o("626a"),i=o("4bf8"),a=o("9def"),c=o("cd1c");t.exports=function(t,e){var o=1==t,s=2==t,d=3==t,p=4==t,h=6==t,g=5==t||h,l=e||c;return function(e,c,u){for(var v,f,x=i(e),m=r(x),y=n(c,u,3),B=a(m.length),w=0,I=o?l(e,B):s?l(e,0):void 0;B>w;w++)if((g||w in m)&&(v=m[w],f=y(v,w,x),t))if(o)I[w]=f;else if(f)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:I.push(v)}else if(p)return!1;return h?-1:d||p?p:I}}},1169:function(t,e,o){var n=o("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"4a8d":function(t,e,o){"use strict";o.r(e);o("7f7f"),o("7514");e["default"]={data:function(){return{isStage:!1,dragoverBox:{target:null,componentId:"",rect:{},hint:"",placement:"inside",style:{}}}},methods:{repaintDragoverBox:function(){var t=this;this.dragoverBox.target&&this.$nextTick((function(){var e=t.getContainerRect(),o=t.dragoverBox.target.getBoundingClientRect(),n=t.$el,r=n.scrollTop,i=n.scrollLeft,a=Math.floor(o.top-e.top+r),c=Math.floor(o.left-e.left+i);t.dragoverBox.style={display:"block",width:"".concat(Math.floor(o.width),"px"),height:"".concat(Math.floor(o.height),"px"),top:"".concat(a,"px"),left:"".concat(c,"px")}}))},ondragover:function(t){if(t.preventDefault(),this.$el.contains(t.target)){var e=t.target.closest(".layout-container");if(e){if(this.dragoverBox.target!==e&&(this.dragoverBox.target=e,this.isStage=e.classList.contains("editor-container-screen"),this.dragoverBox.componentId=this.dragoverBox.target.dataset.componentId,this.dragoverBox.rect=this.dragoverBox.target.getBoundingClientRect()),this.dragoverBox.target){var o=this.dragoverBox.target.dataset.componentName,n={x:0,y:15};"NestedLayoutContainer"!==o&&"PositionLayoutContainer"!==o&&(n.y=this.dragoverBox.rect.height/2);var r={x:t.clientX,y:t.clientY},i={x:this.dragoverBox.rect.x+n.x,y:this.dragoverBox.rect.y,w:this.dragoverBox.rect.width-2*n.x,h:n.y},a={x:this.dragoverBox.rect.x+n.x,y:this.dragoverBox.rect.y+this.dragoverBox.rect.height-n.y,w:this.dragoverBox.rect.width-2*n.x,h:n.y},c={x:this.dragoverBox.rect.x+n.x,y:this.dragoverBox.rect.y+n.y,w:this.dragoverBox.rect.width-2*n.x,h:this.dragoverBox.rect.height-2*n.y};this.pointInRect(r,i)&&(this.dragoverBox.placement="up"),this.pointInRect(r,a)&&(this.dragoverBox.placement="down"),this.pointInRect(r,c)&&(this.dragoverBox.placement="inside"),this.isStage&&(this.dragoverBox.placement="inside"),this.dragoverBox.hint="insert ".concat(o," ").concat(this.dragoverBox.placement)}this.repaintDragoverBox()}}else this.dragoverBox={target:null,componentId:"",rect:{},hint:"",placement:"inside",style:{}}},pointInRect:function(t,e){return t.x>=e.x&&t.y>=e.y&&t.x<=e.x+e.w&&t.y<=e.y+e.h},ondrop:function(t){if(t.preventDefault(),this.dragoverBox.componentId){var e=this.dragoverBox.componentId;this.findParentComponentById(e);var o=null,n=null;n=this.project.components.id===e?this.project.components:this.component.children.find((function(t){return t.id===e}));try{var r=t.dataTransfer.getData("Text"),i=JSON.parse(r);if(o=i,o.layout="nestedLayout",this.asyncLoadComponent(o.name),"PositionLayoutContainer"===n.name&&"inside"===this.dragoverBox.placement){var a=t.target.getBoundingClientRect(),c={position:"absolute",top:"".concat(t.clientY-a.top,"px"),left:"".concat(t.clientX-a.left,"px")};o.layout="positionLayout",o.properties.css=Object.assign({},o.properties.css,c),console.log("ondrop event: ",t,a,o,n,this)}this.dropEvent(o,n)}catch(s){console.log("drop error:",s)}}this.dragoverBox={target:null,componentId:"",rect:{},hint:"",placement:"inside",style:{}}},dropEvent:function(t,e){var o=this;console.log("nested drop:",t,e,this);var n="",r="";if("up"===this.dragoverBox.placement)r="componentInsertAbove",n="insert ".concat(t.properties.name," above ").concat(e.properties.name);else if("down"===this.dragoverBox.placement)r="componentInsertBelow",n="insert ".concat(t.properties.name," below ").concat(e.properties.name);else switch(e.name){case"NestedLayoutContainer":r="componentInsertInto",n="insert ".concat(t.properties.name," into ").concat(e.properties.name);break;case"PositionLayoutContainer":r="componentInsertInto",n="insert ".concat(t.properties.name," into ").concat(e.properties.name);break;default:console.log("Sorry, we are out of ".concat(e.name,"."))}this.emitEvent(r,t,e.id),this.emitEvent("snapshotProject"),this.$Message({showClose:!0,message:n,type:"success"}),setTimeout((function(){o.currentComponentId=t.id,o.componentSelectedStack=[t.id]}),200)}},created:function(){this.$EventStack.register("editor-container","dragover",this.ondragover),this.$EventStack.register("editor-container","drop",this.ondrop)},destroyed:function(){this.$EventStack.dispose("editor-container","dragover"),this.$EventStack.dispose("editor-container","drop")}}},7514:function(t,e,o){"use strict";var n=o("5ca1"),r=o("0a49")(5),i="find",a=!0;i in[]&&Array(1)[i]((function(){a=!1})),n(n.P+n.F*a,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o("9c6c")(i)},"7f7f":function(t,e,o){var n=o("86cc").f,r=Function.prototype,i=/^\s*function ([^ (]*)/,a="name";a in r||o("9e1e")&&n(r,a,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},cd1c:function(t,e,o){var n=o("e853");t.exports=function(t,e){return new(n(t))(e)}},e853:function(t,e,o){var n=o("d3f4"),r=o("1169"),i=o("2b4c")("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&(e=e[i],null===e&&(e=void 0))),void 0===e?Array:e}}}]);