(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c5f0f146","chunk-39896cec","chunk-781bee80"],{"02de":function(n,t,e){"use strict";e.r(t);var o=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"side-container",class:{collapse:n.collapse}},[e("ul",{staticClass:"side-menu"},[e("li",{staticClass:"side-handle",on:{click:n.collapseEvent}},[e("i",{staticClass:"el-icon-arrow-left"})]),n._l(n.menu,(function(n){return e("li",{key:n.fields},[e("router-link",{attrs:{to:{name:n.name}}},[e("i",{class:n.icon})])],1)})),n._m(0)],2),e("div",{staticClass:"side-content"},[e("keep-alive",{attrs:{include:"PropertiesContainer"}},[e("router-view",{attrs:{componentId:n.currentComponentId,project:n.project},on:{"update:componentId":function(t){n.currentComponentId=t},"update:component-id":function(t){n.currentComponentId=t}}})],1)],1)])},i=[function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("li",[e("a",{attrs:{href:"https://github.com/wuyaoxing/tenon",target:"blank"}},[e("i",{staticClass:"icon-github"})])])}],r=e("12eb"),c={name:"SideContainer",props:{componentId:String,project:Object},data:function(){return{menu:r["b"],collapse:!1}},computed:{currentComponentId:{get:function(){return this.componentId},set:function(n){this.$emit("update:componentId",n)}}},watch:{$route:function(){this.expandHandler()}},methods:{collapseEvent:function(){this.collapse=!this.collapse},expandHandler:function(){this.collapse=!1}}},s=c,u=(e("24a0"),e("2877")),a=Object(u["a"])(s,o,i,!1,null,null,null);t["default"]=a.exports},"12eb":function(n,t,e){"use strict";e.d(t,"b",(function(){return c}));var o=e("2b0e"),i=e("8c4f");o["default"].use(i["a"]);var r=function(n){return function(){return e("9dac")("./".concat(n))}},c=[{name:"tree",path:"tree",component:r("designer/layout/tree/TreeContainer"),fields:"tree",icon:"icon-tree"},{name:"components",path:"components",component:r("designer/layout/components/ComponentsContainer"),fields:"components",icon:"icon-components"},{name:"properties",path:"properties",component:r("designer/layout/properties/PropertiesContainer"),fields:"properties",icon:"icon-edit"}],s=[{name:"designer",path:"/projects/:id",redirect:{name:"components"},component:r("designer/Designer"),fields:"designer",children:c},{name:"404",path:"/404",component:r("404"),fields:404},{path:"*",redirect:"404"}];t["a"]=new i["a"]({routes:s,linkActiveClass:"active",linkExactActiveClass:"active"})},1773:function(n,t,e){},"20c1":function(n,t,e){"use strict";e.r(t);e("2397");var o=e("d4ec"),i=e("bee2");function r(n,t){return r=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},r(n,t)}function c(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&r(n,t)}var s=e("7037"),u=e.n(s);function a(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function d(n,t){return!t||"object"!==u()(t)&&"function"!==typeof t?a(n):t}function l(n){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},l(n)}var p=e("a891"),f=e("ed9b");function m(n){var t=h();return function(){var e,o=l(n);if(t){var i=l(this).constructor;e=Reflect.construct(o,arguments,i)}else e=o.apply(this,arguments);return d(this,e)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}var v=function(n){c(e,n);var t=m(e);function e(n){var i;return Object(o["a"])(this,e),i=t.call(this),i.project=n,i.components=i.project.components,i.$Undo=new f["default"],i}return Object(i["a"])(e,[{key:"updateProject",value:function(n){this.project=n,this.components=this.project.components}},{key:"snapshotProject",value:function(){this.$Undo.addUndo(this.project),console.log("Editor snapshotProject: ",this)}}]),e}(p["default"]),y=["undo","redo","snapshotProject","componentInsertAbove","componentInsertBelow","componentInsertInto","componentUp","componentDown","componentRemove"];t["default"]={data:function(){return{Editor:null,project:{}}},computed:{isFirstUndo:function(){return this.Editor.$Undo.isFirstUndo},isLastUndo:function(){return this.Editor.$Undo.isLastUndo}},methods:{componentInsertAbove:function(){var n;(n=this.Editor).componentInsertAbove.apply(n,arguments)},componentInsertBelow:function(){var n;(n=this.Editor).componentInsertBelow.apply(n,arguments)},componentInsertInto:function(){var n;(n=this.Editor).componentInsertInto.apply(n,arguments)},componentUp:function(){var n;(n=this.Editor).componentUp.apply(n,arguments)},componentDown:function(){var n;(n=this.Editor).componentDown.apply(n,arguments)},componentRemove:function(){var n;(n=this.Editor).componentRemove.apply(n,arguments)},updateProject:function(n){this.project=n,this.Editor.updateProject(n),console.log("Editor updateProject: ",this.Editor)},snapshotProject:function(){this.Editor.snapshotProject()},undo:function(){this.Editor.$Undo.undo(this.updateProject)},redo:function(){this.Editor.$Undo.redo(this.updateProject)},init:function(){this.Editor=new v(this.project),console.log("Editor init: ",this,this.Editor)}},created:function(){var n=this;y.forEach((function(t){n.$EventBus.$on(t,n[t]),console.log("EventBus on: ",t)}))},destroy:function(){var n=this;y.forEach((function(t){n.$EventBus.$off(t,n[t])}))}}},2397:function(n,t,e){var o=e("5ca1"),i=e("2aeb"),r=e("d8e8"),c=e("cb7c"),s=e("d3f4"),u=e("79e5"),a=e("f0c1"),d=(e("7726").Reflect||{}).construct,l=u((function(){function n(){}return!(d((function(){}),[],n)instanceof n)})),p=!u((function(){d((function(){}))}));o(o.S+o.F*(l||p),"Reflect",{construct:function(n,t){r(n),c(t);var e=arguments.length<3?n:r(arguments[2]);if(p&&!l)return d(n,t,e);if(n==e){switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3])}var o=[null];return o.push.apply(o,t),new(a.apply(n,o))}var u=e.prototype,f=i(s(u)?u:Object.prototype),m=Function.apply.call(n,f,t);return s(m)?m:f}})},"24a0":function(n,t,e){"use strict";e("1773")},3501:function(n,t,e){"use strict";e("4331")},4331:function(n,t,e){},7037:function(n,t){function e(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(n.exports=e=function(n){return typeof n},n.exports["default"]=n.exports,n.exports.__esModule=!0):(n.exports=e=function(n){return n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n.exports["default"]=n.exports,n.exports.__esModule=!0),e(t)}n.exports=e,n.exports["default"]=n.exports,n.exports.__esModule=!0},"7d5f":function(n,t,e){"use strict";e("83d4")},"83d4":function(n,t,e){},"9d64":function(n,t,e){n.exports=e.p+"img/logo.6811d4b7.png"},a891:function(n,t,e){"use strict";e.r(t),e.d(t,"default",(function(){return r}));e("20d6"),e("7514");var o=e("d4ec"),i=e("bee2"),r=function(){function n(t){Object(o["a"])(this,n),this.components=t}return Object(i["a"])(n,[{key:"findParentComponentById",value:function(n){if(!n)return{};var t=null;if(this.components.id===n)t=this.components;else{var e=function n(e,o){if(e.id!==o&&e.children)for(var i=0;i<e.children.length;i++){var r=e.children[i];if(n(r,o),r.id===o){t=e;break}}};e(this.components,n)}return t}},{key:"findComponentById",value:function(n){var t=null,e=this.findParentComponentById(n);return t=e.id===n?e:e.children.find((function(t){return t.id===n})),t}},{key:"componentInsertAbove",value:function(n,t){var e=this.findParentComponentById(t),o=e.children.findIndex((function(n){return n.id===t}));e.children.splice(o,0,n)}},{key:"componentInsertBelow",value:function(n,t){var e=this.findParentComponentById(t),o=e.children.findIndex((function(n){return n.id===t}));e.children.splice(o+1,0,n)}},{key:"componentInsertInto",value:function(n,t){var e=this.findComponentById(t);e.children.push(n)}},{key:"componentUp",value:function(n){var t=this.findParentComponentById(n),e=t.children,o=e.findIndex((function(t){return t.id===n}));e.splice(o-1,0,e.splice(o,1)[0])}},{key:"componentDown",value:function(n){var t=this.findParentComponentById(n),e=t.children,o=e.findIndex((function(t){return t.id===n}));e.splice(o+1,0,e.splice(o,1)[0])}},{key:"componentRemove",value:function(n){console.log("Editor componentRemove: ",this);var t=this.findParentComponentById(n),e=t.children,o=e.findIndex((function(t){return t.id===n}));e.splice(o,1)}}]),n}()},bee2:function(n,t,e){"use strict";function o(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function i(n,t,e){return t&&o(n.prototype,t),e&&o(n,e),n}e.d(t,"a",(function(){return i}))},c5c0:function(n,t,e){"use strict";e.r(t);var o=function(){var n=this,t=n.$createElement,o=n._self._c||t;return o("MainLayout",{staticClass:"tenon-designer"},[o("header",{staticClass:"tenon-designer-header f-fs-0 f f-ai-c f-jc-sb"},[o("h1",[o("img",{attrs:{src:e("9d64"),alt:"logo"}}),n._v("\n            Tenon\n        ")]),o("ul",{staticClass:"tenon-designer-header-action f"},[o("li",{class:{disabled:n.isFirstUndo},attrs:{title:"undo"},on:{click:function(t){return n.emitEvent("undo")}}},[o("i",{staticClass:"icon-undo"})]),o("li",{class:{disabled:n.isLastUndo},attrs:{title:"redo"},on:{click:function(t){return n.emitEvent("redo")}}},[o("i",{staticClass:"icon-undo",staticStyle:{transform:"scaleX(-1)"}})]),o("li",{attrs:{title:"full screen"},on:{click:n.fullScreen}},[o("i",{staticClass:"icon-full-screen"})]),o("li",{attrs:{title:"save"},on:{click:n.save}},[o("i",{staticClass:"icon-save"})]),o("li",{attrs:{title:"preview"},on:{click:n.preview}},[o("i",{staticClass:"icon-preview"})])])]),o("div",{staticClass:"tenon-designer-main f-f-1 f"},[o("SideContainer",{staticClass:"tenon-designer-side",attrs:{componentId:n.componentId,project:n.project},on:{"update:componentId":function(t){n.componentId=t},"update:component-id":function(t){n.componentId=t}}}),o("EditorContainer",{staticClass:"tenon-designer-editor f-f-1",attrs:{componentId:n.componentId,project:n.project},on:{"update:componentId":function(t){n.componentId=t},"update:component-id":function(t){n.componentId=t}}}),o("Handle",{attrs:{direction:"right",offset:0,visiable:n.handleVisiable},on:{"update:visiable":function(t){n.handleVisiable=t}}},[o("PropertiesContainer",{staticClass:"tenon-designer-properties",attrs:{componentId:n.componentId,project:n.project},on:{"update:componentId":function(t){n.componentId=t},"update:component-id":function(t){n.componentId=t}}})],1)],1)])},i=[],r=(e("7514"),e("20d6"),e("e241")),c=e("cd85"),s=e("02de"),u=e("c4b1"),a=e("20c1"),d={name:"tenon-designer",mixins:[a["default"]],components:{MainLayout:r["a"],EditorContainer:c["default"],SideContainer:s["default"],PropertiesContainer:u["default"]},provide:function(){return{emitEvent:this.emitEvent}},data:function(){return{handleVisiable:!0,componentId:""}},computed:{projectId:function(){return this.$route.params.id}},methods:{fullScreen:function(){document.documentElement.requestFullScreen?document.FullScreenElement?document.exitFullScreen():document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.mozFullScreenElement?document.mozCancelFullScreen():document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen?document.webkitFullscreenElement?document.webkitExitFullscreen():document.documentElement.webkitRequestFullScreen():document.documentElement.msRequestFullscreen&&(document.msFullScreenElement?document.msExitFullscreen():document.documentElement.msRequestFullscreen())},save:function(){var n=this,t=localStorage.getItem("Tenon-projects"),e=t?JSON.parse(t):[],o=e.findIndex((function(t){return t.id===n.project.id}));e.splice(o,1,this.project),localStorage.setItem("Tenon-projects",JSON.stringify(e)),console.log("Tenon save projects: ",localStorage.getItem("Tenon-projects")),this.$Message.success("Save Success!")},preview:function(){window.open("/tenon/viewer#/projects/".concat(this.projectId))},fetchProject:function(){var n=this,t=localStorage.getItem("Tenon-projects"),e=t?JSON.parse(t):[];this.project=e.find((function(t){return t.id===n.projectId}))||{},this.init(),this.emitEvent("snapshotProject")},emitEvent:function(n){for(var t,e=arguments.length,o=new Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];(t=this.$EventBus).$emit.apply(t,[n].concat(o))}},created:function(){this.fetchProject()}},l=d,p=(e("3501"),e("2877")),f=Object(p["a"])(l,o,i,!1,null,null,null);t["default"]=f.exports},d4ec:function(n,t,e){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}e.d(t,"a",(function(){return o}))},e241:function(n,t,e){"use strict";var o=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("section",{staticClass:"main-layout f f-fd-c"},[n._t("default")],2)},i=[],r={name:"MainLayout"},c=r,s=(e("7d5f"),e("2877")),u=Object(s["a"])(c,o,i,!1,null,null,null);t["a"]=u.exports},ed9b:function(n,t,e){"use strict";e.r(t),e.d(t,"default",(function(){return r}));var o=e("d4ec"),i=e("bee2"),r=function(){function n(){Object(o["a"])(this,n),this.undos=[],this.undoIndex=0}return Object(i["a"])(n,[{key:"isFirstUndo",get:function(){return 0===this.undoIndex}},{key:"isLastUndo",get:function(){return this.undoIndex===this.undos.length-1}},{key:"currentUndo",get:function(){return JSON.parse(JSON.stringify(this.undos[this.undoIndex]))}},{key:"undo",value:function(n){this.undoIndex>0&&(this.undoIndex-=1,n(this.currentUndo))}},{key:"redo",value:function(n){this.undoIndex<this.undos.length-1&&(this.undoIndex+=1,n(this.currentUndo))}},{key:"addUndo",value:function(n){this.undoIndex!==this.undos.length-1&&(this.undos=this.undos.slice(0,this.undoIndex+1)),this.undos.push(JSON.parse(JSON.stringify(n))),this.undoIndex=this.undos.length-1}}]),n}()},f0c1:function(n,t,e){"use strict";var o=e("d8e8"),i=e("d3f4"),r=e("31f4"),c=[].slice,s={},u=function(n,t,e){if(!(t in s)){for(var o=[],i=0;i<t;i++)o[i]="a["+i+"]";s[t]=Function("F,a","return new F("+o.join(",")+")")}return s[t](n,e)};n.exports=Function.bind||function(n){var t=o(this),e=c.call(arguments,1),s=function(){var o=e.concat(c.call(arguments));return this instanceof s?u(t,o.length,o):r(t,o,n)};return i(t.prototype)&&(s.prototype=t.prototype),s}}}]);